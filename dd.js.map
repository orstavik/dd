{
  "version": 3,
  "sources": ["src/0_UrlLocationSegments.js", "src/0_FormSubmitRequestFix.js", "src/0_NativeDefaultActions.js", "src/1_PortalMap.js", "src/1c_WindowDocumentEvents.js", "src/1b_DomEvents.js", "src/2_EventLoopCube.js", "src/3_monkeyPatchAppendElements.js", "src/4_Portals.js", "src/dd.js"],
  "sourcesContent": ["function segments() { return this.pathname.split('/').slice(1); }\nexport function patchSegments(...protos){\n  for (let proto of protos)\n    if(proto)\n      Object.defineProperty(proto, 'segments', { get: segments, configurable: true });\n}\n\n", "export function FormSubmitRequestFix(\n  HTMLFormElementProto = HTMLFormElement.prototype,\n  HTMLButtonElementProto = HTMLButtonElement.prototype,\n  HTMLInputElementProto = HTMLInputElement.prototype\n) {\n  //fix 1: adding optional submitter to form.submit(submitter)\n  const submitOG = HTMLFormElementProto.submit;\n  Object.defineProperty(HTMLFormElementProto, \"submit\", {\n    value: function (submitter) {\n      if (!submitter || formaction in submitter)\n        return submitOG.call(this);\n      const { formaction, formmethod, formenctype, formtarget } = submitter;\n      const { action, method, enctype, target } = this;\n      if (formaction && formaction !== action) this.action = formaction;\n      if (formmethod && formmethod !== method) this.method = formmethod;\n      if (formenctype && formenctype !== enctype) this.enctype = formenctype;\n      if (formtarget && formtarget !== target) this.target = formtarget;\n      submitOG.call(this);\n      if (formaction && formaction !== action) this.action = action;\n      if (formmethod && formmethod !== method) this.method = method;\n      if (formenctype && formenctype !== enctype) this.enctype = enctype;\n      if (formtarget && formtarget !== target) this.target = target;\n    }\n  });\n\n  //fix 2: adding form.request\n  Object.defineProperty(HTMLFormElementProto, \"request\", {\n    value: function () {\n      if (this.method === \"dialog\")\n        return;\n      let { method, action, enctype, credentials = \"include\", rel } = this;\n      const referrerPolicy = rel?.toLowerCase().split(' ').includes('noreferrer') && \"no-referrer\";\n      if (method === \"get\") {\n        action = new URL(action);\n        action.search = new URLSearchParams(formData);\n        return new Request(action, { method, credentials, referrerPolicy });\n      } else if (enctype === \"multipart/form-data\") {\n        return new Request(action, { method, credentials, referrerPolicy, body: new FormData(this) });\n      } else if (enctype === 'text/plain') {\n        const body = [...formData].map(([k, v]) => `${k}=${v}`).join('\\r\\n');\n        return new Request(action, { method, credentials, referrerPolicy, body, headers: { 'Content-Type': 'text/plain' } });\n      }\n      throw new Error(\"Cannot get the request for the given method : enctype: \" + method + \" : \" + enctype);\n    },\n  });\n\n  //fix 3: adding input.request, button.request.\n  function submitterRequest() {\n    const request = (this.type === \"submit\" || this.type === \"image\") && this.form?.request;\n    if (!request) return;\n    if (this.formaction) request.url = this.formaction;\n    if (this.formmethod) request.method = this.formmethod;\n    if (this.formenctype) request.enctype = this.formenctype;\n    return request;\n  }\n  Object.defineProperty(HTMLButtonElementProto, \"request\", { value: submitterRequest });\n  Object.defineProperty(HTMLInputElementProto, \"request\", { value: submitterRequest });\n}\n//note: for <a href> and <area href> don't need .request, as .href already exists.", "//Edge case 1: \"Enter\" on <input type=checkbox|radio|color>.\n//    Browser behavior sometimes can interpret \"Enter\" as select. \n//    In this system, \"Enter\" is *always* treated as a <form submit>.\n//    \"Space to select, enter to submit\" is the rule.\n//Edge case 2: <button|input type=button> browser-developer associates no action with this thing.\n//    However, the convention is that this will have an intent by the developer/3.party-developer, \n//    thus avoiding submit on click/enter default actions.\n//\n//INCLUSIVE .actions!! We do ALL the .actions that match an element, not just the first match.\n\nconst NativeDefaultActions = {\n  click: {\n    matcher: \"a[href], area[href], label, button[type=submit], button[type=reset], input, option, select, textarea,\" +\n      \"[contenteditable=true], [tabindex], form button:not([type]), details>summary:first-of-type\",\n    actions: {\n      \"a[href],area[href]\": t => t.cloneNode().click(),\n      \"form :is([type=submit],[type=image],button:not([type]))\": el => el.form?.submit(el),\n      \"label\": t => _ => t.control?.focus(),\n      \"summary\": t => _ => t.parentElement?.tagName === \"DETAILS\" && t.parentElement.toggleAttribute(\"open\"),\n      \"[type=reset]\": t => _ => t.form?.reset(),\n      \"[type=checkbox],[type=radio]\": t => _ => t.toggleAttribute(\"checked\"),\n      \"option\": t => _ => t.parentElement.value = t.value, //todo this seems weak\n      \"*\": t => t.focus(),\n    },\n  },\n  //todo lots to add here, like tabbing around and stuff.\n  keydown: {\n    matcher: \"a[href], area[href], input, textarea, [contenteditable=true], button[type=submit], button[type=reset], form button:not([type])\",\n    actions: {\n      \"a[href],area[href]\":\n        (t, e) => (e.key === \"Enter\" || e.key === \" \") && t.cloneNode().click(),  //space toggles, enter submits. But we don't include checkbox, radio, color...\n      \":is(input,button):not([type=button],[type=reset],[type=file],[type=color],[type=range],[type=checkbox],[type=radio],[type=hidden])\":\n        (t, e) => (e.key === \"Enter\") && t.form?.submit(t),\n      \"select\": t => t.toggleAttribute(\"open\"), //todo does this work?\n      \"*\": t => t.hasFocus || t.focus(), //adding or removing the enter character, we don't do,\n    },\n  }\n}\n\nfunction getNativeDefaultAction() {\n  if (!this.isTrusted || this.defaultPrevented || !(this.type in NativeDefaultActions))\n    return;\n  //no custom defaultAction set, no .preventDefault() called, and we have native settings for this event.\n  const { matcher, actions } = NativeDefaultActions[this.type];\n  for (let el = this.composedPath()[0]; el; el = el !== this.currentTarget && (el.assignedSlot ?? el.parentElement ?? el.parentNode?.host))\n    if (el.matches(matcher)) {\n      const defaultAction = (actions, element) => {\n        for (let m in actions)\n          if (element.matches(m))\n            actions[m](element, this);\n      }\n      defaultAction.element = el;\n      defaultAction.native = true;\n      return defaultAction;\n    }\n}\nexport function exposeNativeDefaultAction(\n  MouseEventProto = MouseEvent.prototype,\n  // KeyboardEventProto = KeyboardEvent.prototype\n) {\n  Object.defineProperty(MouseEventProto, \"defaultAction\", { get: getNativeDefaultAction });\n  // Object.defineProperty(KeyboardEventProto, \"defaultAction\", { get: getNativeDefaultAction, set: function (v) { super.defaultAction = v; } });\n}", "export class WeakDictionaryOfSets {\n  #dict = Object.create(null);\n  #onEmpties = Object.create(null);\n  #gcInstance;\n  #gcInterval;\n  constructor(gc = 10_000) { this.#gcInterval = gc; }\n  put(name, value, onEmptyCb) {\n    const set = this.#dict[name] ??= new Set();\n    set.add(new WeakRef(value));\n    this.#onEmpties[name] = onEmptyCb;\n    this.#gcInstance ||= this.#gc();\n  }\n  get(name) {\n    if (!this.#dict[name])\n      return;\n    const set = this.#dict[name];\n    let res;\n    for (const wr of set) {\n      const v = wr.deref();\n      if (!v) set.delete(wr);\n      else if (res) res.push(v);\n      else res = [v];\n    }\n    return res;\n  }\n  #gc() {\n    this.#gcInstance = setInterval(() => {\n      for (const n in this.#dict) {\n        const set = this.#dict[n];\n        for (const wr of set)\n          if (!wr.deref())\n            set.delete(wr);\n        if (set.size === 0) {\n          this.#onEmpties[n]?.();\n          delete this.#dict[n];\n          delete this.#onEmpties[n];\n        }\n      }\n      if (!Object.keys(this.#dict).length)\n        this.#gcInstance = clearInterval(this.#gcInstance);\n    }, this.#gcInterval);\n  }\n}\n\nconst Resolver = Symbol(\"Resolver\");\nconst PromiseResolver = r => Object.assign(new Promise(f => r = f), { [Resolver]: r });\n\nfunction checkFunction(func) {\n  if (typeof func !== \"function\")\n    return `not a function, but a ` + typeof func;\n  let txt = func.toString();\n  if (!/^(async\\s+|)(\\(|[^([]+=)/.test(txt))  //alternative a\n    return;\n  txt = txt.replace(/\\/\\*[\\s\\S]*?\\*\\/|([^\\\\:]|^)\\/\\/.*$/gm, ''); //remove comments\n  //ATT!! `${\"\"}this` only works when \"\" is removed before ``\n  txt = txt.replace(/([\"'])(?:(?=(\\\\?))\\2.)*?\\1/g, '');   //remove \"'-strings\n  txt = txt.replace(/(`)(?:(?=(\\\\?))\\2.)*?\\1/g, '');   //remove `strings\n  if (/\\bthis\\b/.test(txt))                      //the word this\n    return 'arrow function with \"this\"';\n}\n\nfunction verifyPortalDefinition(Portal) {\n  if (!(Portal instanceof Object))\n    throw `not an object, but a ` + typeof Portal;\n  let { onFirstConnect, onReConnect, onMove, onDisconnect, reaction } = Portal;\n  if (!onFirstConnect && !reaction)\n    throw `missing both .onFirstConnect and .reaction`;\n  if (!onFirstConnect && (onDisconnect || onReConnect || onMove))\n    throw `missing .onFirstConnect, but defining either onMove, onReConnect, or .onDisconnect.`;\n  if (onDisconnect && !onReConnect)\n    throw `missing .onReConnect, but defining .onDisconnect.`;\n  Portal = Object.freeze({ onFirstConnect, onDisconnect, onMove, onReConnect, reaction });\n  for (let [k, v] of Object.entries(Portal))\n    if (v && (v = checkFunction(v)))\n      throw `.${k} is ${v}`;\n  return Portal;\n}\n\nexport class PortalMap {\n\n  #portals = Object.create(null);\n  #portalRequests = Object.create(null);\n  #portalUnresolved = Object.create(null);\n\n  define(name, Portal) {\n    if (!name.match(/^[a-z][a-z0-9]*$/))\n      throw new SyntaxError(`Illegal portal name: '${name}'.`);\n    if (name in this.#portalUnresolved)\n      throw new ReferenceError(`Trying to define portal twice: ${name}.`);\n    this.#portalUnresolved[name] = Portal;\n    this.#definePortal(name, Portal);\n  }\n\n  #definePortal(name, Portal) {\n    if (Portal instanceof Promise)\n      return Portal.err(e => e).then(P => this.#definePortal(name, P));\n    try {\n      this.#portals[name] = verifyPortalDefinition(Portal);\n      window.eventLoopCube?.connectPortal(name, this.#portals[name]);\n    } catch (err) {\n      this.#portals[name] = new TypeError(`Portal '${name}': ${err.message}`);\n    } finally {\n      this.#portalRequests[name]?.[Resolver](this.#portals[name]);\n      delete this.#portalRequests[name];\n    }\n  }\n\n  get(portalName) {\n    return this.#portals[portalName];\n  }\n  getReaction(portalName) {\n    return this.#portals[portalName] ?? (this.#portalRequests[portalName] ??= PromiseResolver());\n  }\n}\n/**\n * TriggerReactionRaceCondition\n * -------------------------------------------------------------------------\n * Ensure that when a new portal is registered, that the triggers for that portal \n * in the DOM always trigger *before* any .reaction requests.\n * -------------------------------------------------------------------------\n * \n * If both a reaction and trigger awaits the same portal definition, then\n * the reaction is often registered first in the FIFO microtask queue.\n * However, portals always function reaction => triggers (not the other way round).\n * This means that we always want all the portal's triggers to be ready before we run any of the portal's reactions.\n */", "import { WeakDictionaryOfSets } from \"./1_PortalMap.js\";\n\nconst TRIGGERS = new WeakDictionaryOfSets();\n\nfunction portalDispatch(e) {\n  const res = TRIGGERS.get(e.type);\n  res && eventLoopCube.dispatchBatch(e, res);\n}\n\nfunction Portal(NAME, root = document) {\n  return {\n    onFirstConnect: function () {\n      TRIGGERS.put(NAME, this, _ => root.removeEventListener(NAME, portalDispatch));\n      root.addEventListener(NAME, portalDispatch);\n    },\n    reaction: () => portalDispatch(new Event(NAME)),\n  };\n}\n\nconst DocumentOnlyEvents =\n  ['readystatechange', 'pointerlockchange', 'pointerlockerror', 'freeze', 'prerenderingchange', 'resume', 'visibilitychange'];\nconst WindowOnlyEvents = ['appinstalled', 'beforeinstallprompt', 'afterprint', 'beforeprint', 'beforeunload', 'hashchange', 'languagechange',\n  'message', 'messageerror', 'offline', 'online', 'pagehide', 'pageshow', 'popstate', 'rejectionhandled', 'storage', 'unhandledrejection', 'unload',\n  'devicemotion', 'deviceorientation', 'deviceorientationabsolute', 'pageswap', 'pagereveal'];\n\nconst Portals = Object.create(null);\nPortals.dcl = Portal(\"DOMContentLoaded\", document);\nPortals.youtubeiframeapiready = Portal(\"YouTubeIframeAPIReady\", window);\nfor (let type of DocumentOnlyEvents)\n  Portals[type] = Portal(type, document);\nfor (let type of WindowOnlyEvents)\n  Portals[type] = Portal(type, window);\n\nexport { Portals };", "const DomEvents = ['touchstart', 'touchmove', 'touchend', 'touchcancel', 'beforexrselect', 'abort', 'beforeinput', 'beforematch', 'beforetoggle',\n  'blur', 'cancel', 'canplay', 'canplaythrough', 'change', 'click', 'close', 'contentvisibilityautostatechange', 'contextlost', 'contextmenu',\n  'contextrestored', 'cuechange', 'dblclick', 'drag', 'dragend', 'dragenter', 'dragleave', 'dragover', 'dragstart', 'drop', 'durationchange',\n  'emptied', 'ended', 'error', 'focus', 'formdata', 'input', 'invalid', 'keydown', 'keypress', 'keyup', 'load', 'loadeddata', 'loadedmetadata',\n  'loadstart', 'mousedown', 'mouseenter', 'mouseleave', 'mousemove', 'mouseout', 'mouseover', 'mouseup', 'mousewheel', 'pause', 'play', 'playing',\n  'progress', 'ratechange', 'reset', 'resize', 'scroll', 'securitypolicyviolation', 'seeked', 'seeking', 'select', 'slotchange', 'stalled',\n  'submit', 'suspend', 'timeupdate', 'toggle', 'volumechange', 'waiting', 'webkitanimationend', 'webkitanimationiteration', 'webkitanimationstart',\n  'webkittransitionend', 'wheel', 'auxclick', 'gotpointercapture', 'lostpointercapture', 'pointerdown', 'pointermove', 'pointerrawupdate',\n  'pointerup', 'pointercancel', 'pointerover', 'pointerout', 'pointerenter', 'pointerleave', 'selectstart', 'selectionchange', 'animationend',\n  'animationiteration', 'animationstart', 'transitionrun', 'transitionstart', 'transitionend', 'transitioncancel', 'copy', 'cut', 'paste', 'command',\n  'scrollend', 'scrollsnapchange', 'scrollsnapchanging', 'beforecopy', 'beforecut', 'beforepaste', 'search', 'fullscreenchange', 'fullscreenerror',\n  'webkitfullscreenchange', 'webkitfullscreenerror'];\nconst NonBubblingEvents = new Set(['focus', 'blur', 'load', 'unload', 'error', 'abort', 'mouseenter', 'mouseleave',\n  'scroll', 'scrollend', 'scrollsnapchange', 'scrollsnapchanging']);\nconst ComposedEvents = new Set(['click', 'auxclick', 'dblclick', 'mousedown', 'mouseup', 'focus', 'blur',\n  'pointerdown', 'pointerup', 'pointercancel', 'pointerover', 'pointerout', 'pointerenter', 'pointerleave']);\nconst PassiveEvents = new Set([\"wheel\", \"mousewheel\", \"touchstart\", \"touchmove\"]);\n\nfunction getTriggersComposedBubble(type, el) {\n  let attrs, first;\n  for (; el; el = el.assignedSlot ?? el.parentElement ?? el.parentNode.host)\n    if (el[EventLoopCube.PORTAL]?.[type])\n      for (let at of el.attributes)\n        if (EventLoopCube.portalNames(at.name)[0] === type)\n          !first ? (first = at) : (attrs ??= [first]).push(at);\n  return attrs ?? first;\n}\nfunction getTriggersComposedTarget(type, el) {\n  let attrs, first;\n  for (; el; el = el.assignedSlot ?? el.getRootNode()?.host)\n    if (el[EventLoopCube.PORTAL]?.[type])\n      for (let at of el.attributes)\n        if (EventLoopCube.portalNames(at.name)[0] === type)\n          !first ? (first = at) : (attrs ??= [first]).push(at);\n  return attrs ?? first;\n}\nfunction getTriggersBubble(type, el) {\n  let attrs, first;\n  for (; el && el instanceof HTMLElement; el = el.parentElement)\n    if (el[EventLoopCube.PORTAL]?.[type])\n      for (let at of el.attributes)\n        if (EventLoopCube.portalNames(at.name)[0] === type)\n          !first ? (first = at) : (attrs ??= [first]).push(at);\n  return attrs ?? first;\n}\nfunction getTriggersTarget(type, el) {\n  let attrs, first;\n  if (el[EventLoopCube.PORTAL]?.[type])\n    for (let at of el.attributes)\n      if (EventLoopCube.portalNames(at.name)[0] === type)\n        !first ? (first = at) : (attrs ??= [first]).push(at);\n  return attrs ?? first;\n}\n\nfunction Portal(TYPE, reaction) {\n  const passive = PassiveEvents.has(TYPE);\n  const bubbles = !NonBubblingEvents.has(TYPE);\n  const composed = ComposedEvents.has(TYPE);\n  const propagationPath =\n    (bubbles && composed) ? getTriggersComposedBubble :\n      composed ? getTriggersComposedTarget :\n        bubbles ? getTriggersBubble :\n          getTriggersTarget;\n  const listener = function (e) {\n    e.stopImmediatePropagation();\n    const atOrAttrs = propagationPath(TYPE, e.currentTarget);\n    atOrAttrs instanceof Array ?\n      eventLoopCube.dispatchBatch(e, atOrAttrs) :\n      eventLoopCube.dispatch(e, atOrAttrs);\n  };\n\n  reaction ??= function () {\n    this.ownerElement.dispatchEvent(new Event(TYPE, { bubbles, composed, cancelable: !passive }));\n  }\n  return {\n    onFirstConnect: function () { this.ownerElement.addEventListener(TYPE, listener, { passive: passive || this.name.includes(\"_passive\") }); },\n    reaction,\n  };\n}\nconst Portals = Object.create(null);\nPortals.click = Portal(\"click\", function () { this.ownerElement.click() });\nPortals.submit = Portal(\"submit\", function () { this.ownerElement.requestSubmit() });\n\nfor (let type of DomEvents)\n  Portals[type] ??= Portal(type);\n\nexport { Portals };", "class MicroFrame {\n  #i = 1;\n  #inputs;\n\n  constructor(event, at) {\n    this.at = at;\n    this.root = at.ownerElement.getRootNode();\n    this.event = event;\n    this.names = at.name.split(\":\");\n    this.portalNames = EventLoopCube.portalNames(at.name);\n    this.#inputs = [event];\n  }\n\n  #checkLegalTail(type) {\n    const i = this.names.indexOf(\"\");\n    if (i <= this.#i)\n      return;\n    this.event.preventDefault();\n    const errorNames = [...this.names];\n    errorNames[this.#i] += \" >>awaits here<< \";\n    errorNames[i - 1] += \" >>defaultAction start<< \";\n    throw new Error(\"A defaultAction is left behind an async reaction while \" + type + \".\\n\" + errorNames.join(\":\"));\n  }\n\n  get result() { return this.#inputs[0]; }\n\n  getState() {\n    return { at: this.at, event: this.event, inputs: this.#inputs, i: this.#i, names: this.names, };\n  }\n\n  async run() {\n    let portal;\n    for (let re = this.names[this.#i]; re !== undefined; re = this.names[++this.#i]) {\n      if (re === \"\") {\n        this.#inputs.unshift(EventLoopCube.DefaultAction);\n        this.#i++;\n        if (this.root.portals.getReaction(this.portalNames[this.#i]) instanceof Promise) {\n          portal = new Error(`Asynchronous defaultActions: \":${this.names[this.#i]}\" not yet loaded in \"${this.at.name}\"`);\n          break;\n        }\n      }\n      portal = this.root.portals.getReaction(this.portalNames[this.#i]);\n      if (portal instanceof Promise) {\n        this.#checkLegalTail(\"loading definition\");\n        portal = await portal;\n      }\n      if (portal instanceof Error) break;\n      if (portal.reaction === null) {\n        portal = new Error(\"reaction is null: \" + re);\n        break;\n      }\n      this.#inputs.unshift(portal.reaction.apply(this.at, this.#inputs));\n      if (this.#inputs[0] instanceof Promise) {\n        this.#checkLegalTail(\"executing function\");\n        try { this.#inputs[0] = await this.#inputs[0]; } catch (err) { this.#inputs[0] = err; }\n        if (this.#inputs[0] instanceof Error) break;\n      }\n      if (this.#inputs[0] === EventLoopCube.Cancel) break;\n      if (this.#inputs[0] === EventLoopCube.Void) this.#inputs.shift();\n    }\n    if (portal instanceof Error) {\n      console.error(portal);\n      this.#inputs.unshift(portal);\n    }\n    return this.#inputs[0];\n  }\n\n  static make(e, at) { return new MicroFrame(e, at); }\n}\n\nclass ConnectFrame {\n  #state;\n  #value;\n  constructor(type, at, value, portal) {\n    this.type = type;\n    this.#state = type;\n    this.at = at;\n    this.portal = portal;\n    this.#value = value;\n  }\n\n  async update() {\n    this.#state = \"awaiting value\";\n    try {\n      this.#value = await this.#value;\n      this.#state = this.type;\n    } catch (err) {\n      this.#value = err;\n      this.#state = \"error onFirstConnect\";\n    }\n  }\n  static make(type, portal, at, value) {\n    const res = new ConnectFrame(type, at, value, portal);\n    if (value instanceof Promise)\n      res.update();\n    return res;\n  }\n  getState() {\n    return {\n      type: this.type,\n      at: this.at,\n      state: this.#state,\n      value: this.#value,\n    };\n  }\n}\n\nexport class EventLoopCube {\n\n  static defaultCleanupFilter = row => {\n    //remove all ConnectFrames that has \"connected\" and not \"onDisconnect\"\n    //remove all MicroFrames that does not have its last input a Promise\n    // if(row instanceof ConnectFrame)\n    //   return row.state === \"connected\" && row.disconnect === \"onDisconnect\";\n\n  }\n  static init(owner, root) {\n    const cube = new EventLoopCube(root, 1000, 3000);\n    owner.eventLoopCube = cube;\n    cube.#root = root;\n    cube.connectBranch(root);\n    return cube;\n  }\n\n  #root;\n  #cube; //[...events : [...microFrames]]  //todo in a more efficient world, this would be a single flat array.\n  #I = 0;\n  #J = 0;\n  #active = false;\n  #disconnectables = new Map();\n  constructor(disconnectInterval = 1000, cleanupInterval = 3000) {\n    this.#cube = [];\n    //runs its own internal gc\n    setInterval(_ => this.disconnect(), disconnectInterval);\n    // todo the filter is not implemented yet\n    //q setInterval(_ => this.cleanup(), cleanupInterval);\n  }\n\n  get state() { return this.#cube.map(row => row.getState?.() || row.map(mf => mf.getState())); }\n\n  #loop(newRow) {\n    this.#cube.push(newRow);\n    if (this.#active)\n      return;\n    this.#active = true;\n    for (; this.#I < this.#cube.length; this.#I++) {\n      const row = this.#cube[this.#I];\n      for (; this.#J < row.length; this.#J++)\n        row[this.#J].run?.();\n      //default action handling start\n      if (row[0].event?.cancelable)\n        for (let j = this.#J - 1; j >= 0; j--)                 //when we run the default actions in reverse, \n          if (row[j].result === EventLoopCube.DefaultAction) { //and find the top defaultAction\n            const defActRes = row[j].run();\n            if (defActRes === EventLoopCube.Cancel)             //and that defaultAction returns EventLoopCube.Cancel\n              continue;                                        //then we try the next defaultAction.\n            defActRes.then?.(res => {\n              if (res === EventLoopCube.Cancel)\n                throw new Error(\"defaultActions returned EventLoopCube.Cancel asynchronously: \" + row[j].at.name);\n            });\n          }\n      //default action handling end\n      this.#J = 0;\n    }\n    this.#active = false;\n    return;\n  }\n\n  dispatch(e, at) {\n    (e && this.#active && this.#cube[this.#I]?.[0].event === e) ?\n      this.#cube[this.#I].push(MicroFrame.make(e, at)) :\n      this.#loop([MicroFrame.make(e, at)]);\n  }\n  dispatchBatch(e, attrs) {\n    (e && this.#active && this.#cube[this.#I]?.[0].event === e) ?\n      this.#cube[this.#I].push(...attrs.map(at => MicroFrame.make(e, at))) :\n      this.#loop(attrs.map(at => MicroFrame.make(e, at)));\n  }\n  disconnect() {\n    for (let at of this.#disconnectables.keys())\n      if (!at.ownerElement.isConnected) {\n        const portal = this.#disconnectables.get(at);\n        ConnectFrame.make(\"onDisconnect\", portal, at, portal.onDisconnect?.call(at));\n        this.#disconnectables.delete(at);\n      }\n  }\n  async cleanup(filter = EventLoopCube.defaultCleanupFilter) {\n    const keeps = this.#cube.slice(0, this.#I).filter(filter);\n    this.#cube = [...keeps, ...this.#cube.slice(this.#I)];\n    this.#I = keeps.length;\n  }\n  connectBranch(...els) {\n    const portalMap = els[0]?.ownerDocument.portals;\n    const frames = [];\n    for (let top of els) {\n      if (!(top instanceof Element) || (!top.hasAttributes() && !top.children.length))\n        continue;\n      const task = !top[EventLoopCube.PORTAL] ? \"doFirstConnect\" : top.isConnected ? \"doMove\" : \"doReConnect\";\n      for (let el = top, subs = top.getElementsByTagName(\"*\"), i = 0; el; el = subs[i++]) {\n        if (task === \"doFirstConnect\") {\n          if (!el.hasAttributes())\n            continue;\n          el[EventLoopCube.PORTAL] = Object.create(null);\n          for (let at of el.attributes) {\n            const portalName = EventLoopCube.portalNames(at.name)[0];\n            const portal = portalMap.get(portalName);\n            el[EventLoopCube.PORTAL][portalName] ||= false;\n            if (portal?.onFirstConnect) {\n              const res = portal.onFirstConnect.call(at);\n              const frame = ConnectFrame.make(\"onFirstConnect\", portal, at, res);\n              if (res !== EventLoopCube.Cancel) {\n                frames.push(frame);\n                el[EventLoopCube.PORTAL][portalName] = portal;\n                el[EventLoopCube.MOVEABLES] ||= !!portal.onMove;\n                el[EventLoopCube.RECONNECTABLES] ||= !!portal.onReconnect;\n                portal.onDisconnect && this.#disconnectables.set(at, portal);\n              }\n            }\n          }\n        } else if (task === \"doMove\") {\n          if (el[EventLoopCube.MOVEABLES])\n            for (let portalName in el[EventLoopCube.PORTAL]) {\n              const portal = el[EventLoopCube.PORTAL][portalName];\n              if (portal?.onMove)\n                for (let at of el.attributes)\n                  if (EventLoopCube.portalNames(at.name)[0] === portalName)\n                    frames.push(ConnectFrame.make(\"onMove\", portal, at, portal.onMove.call(at)));\n            }\n        } else if (task === \"doReConnect\") {\n          if (el[EventLoopCube.RECONNECTABLES])\n            for (let portalName in el[EventLoopCube.PORTAL]) {\n              const portal = el[EventLoopCube.PORTAL][portalName];\n              if (portal?.onReconnect)\n                for (let at of el.attributes)\n                  if (EventLoopCube.portalNames(at.name)[0] === portalName)\n                    frames.push(ConnectFrame.make(\"onReConnect\", portal, at, portal.onReconnect.call(at)));\n            }\n        }\n      }\n    }\n    frames.length && this.#loop(frames);\n  }\n\n  connectPortal(portalName, portal) {\n    const frames = [];\n    for (let el2 of this.#root.getElementsByTagName(\"*\"))\n      if (el2[EventLoopCube.PORTAL]?.[portalName] === false)\n        if (el2[EventLoopCube.PORTAL][portalName] = portal)\n          for (let at of el2.attributes)\n            if (EventLoopCube.portalNames(at.name)[0] === portalName)\n              frames.push(ConnectFrame.make(\"onFirstConnect\", portal, at, portal.onFirstConnect.call(at)));\n    frames.length && this.#loop(frames);\n  }\n  static Cancel = Symbol(\"Cancel\");\n  static Void = Symbol(\"void\");\n  static DefaultAction = Symbol(\"DefaultAction\");\n  static PORTAL = Symbol(\"portals\");\n  static MOVEABLES = Symbol(\"moveables\");\n  static RECONNECTABLES = Symbol(\"reconnectables\");\n  static portalNames = attrName => NameCache[attrName] ??= attrName.split(\":\").map(n => n.split(/[._]/)[0]);\n}\n\nlet NameCache = Object.create(null);\nsetInterval(_ => Object.keys(NameCache).length > 5000 && (NameCache = Object.create(null)), 5000); //very crude GC", "//todo we need to add the different variants of setAttribute monkeypatches as well.\nexport function monkeyPatchAppendElements(onNodesConnected) {\n\n  function insertArgs(og, ...args) {\n    if (!this.isConnected) return og.call(this, ...args);\n    const res = og.call(this, ...args);\n    onNodesConnected(...args);\n    return res;\n  }\n  function insertArgs0(og, ...args) {\n    if (!this.isConnected) return og.call(this, ...args);\n    const res = og.call(this, ...args);\n    onNodesConnected(args[0]);\n    return res;\n  }\n  function insertArgs1(og, ...args) {\n    if (!this.isConnected) return og.call(this, ...args);\n    const res = og.call(this, ...args);\n    onNodesConnected(args[1]);\n    return res;\n  }\n  function range_surroundContent(og, ...args) {\n    if (!this.isConnected) return og.call(this, ...args);\n    const res = og.call(this, ...args);\n    onNodesConnected(args[0]);\n    return res;\n  }\n  function element_replaceWith(og, ...args) {\n    if (!this.isConnected) return og.call(this, ...args);\n    const res = og.call(this, ...args);\n    onNodesConnected(...args);\n    return res;\n  }\n  function parentnode_replaceChildren(og, ...args) {\n    if (!this.isConnected) return og.call(this, ...args);\n    const res = og.call(this, ...args);\n    onNodesConnected(...args);\n    return res;\n  }\n  function innerHTMLsetter(og, ...args) {\n    if (!this.isConnected) return og.call(this, ...args);\n    const res = og.call(this, ...args);\n    onNodesConnected(...this.children);\n    return res;\n  }\n  function outerHTMLsetter(og, ...args) {\n    if (!this.isConnected) return og.call(this, ...args);\n    const sibs = [...this.parentNode.children];\n    const res = og.call(this, ...args);\n    const sibs2 = [...this.parentNode.children].filter(n => !sibs.includes(n));\n    onNodesConnected(...sibs2);\n    return res;\n  }\n  function insertAdjacentHTML_DD(og, position, ...args) {\n    if (!this.isConnected) return og.call(this, position, ...args);\n    let root, index;\n    if (position === \"afterbegin\")\n      root = this, index = 0;\n    else if (position === \"beforeend\")\n      root = this, index = this.children.length;\n    else if (position === \"beforebegin\")\n      root = this.parentNode, index = Array.prototype.indexOf.call(root.children, this);\n    else if (position === \"afterend\")\n      root = this.parentNode, index = Array.prototype.indexOf.call(root.children, this) + 1;\n    const childCount = root.children.length;\n    const res = og.call(this, position, ...args);\n    const addCount = root.children.length - childCount;\n    const newRoots = Array.from(root.children).slice(index, index + addCount);\n    onNodesConnected(...newRoots);\n    return res;\n  }\n\n  const map = [\n    [Element.prototype, \"append\", insertArgs],\n    [Element.prototype, \"prepend\", insertArgs],\n    [Element.prototype, \"before\", insertArgs],\n    [Element.prototype, \"after\", insertArgs],\n    [Document.prototype, \"append\", insertArgs],\n    [Document.prototype, \"prepend\", insertArgs],\n    [DocumentFragment.prototype, \"append\", insertArgs],\n    [DocumentFragment.prototype, \"prepend\", insertArgs],\n\n    [Node.prototype, \"appendChild\", insertArgs0],\n    [Node.prototype, \"insertBefore\", insertArgs0],\n    [Node.prototype, \"replaceChild\", insertArgs0],\n    [Range.prototype, \"insertNode\", insertArgs0],\n\n    [Element.prototype, \"insertAdjacentElement\", insertArgs1],\n\n    [Element.prototype, \"replaceWith\", element_replaceWith],\n    [Element.prototype, \"replaceChildren\", parentnode_replaceChildren],\n    [Document.prototype, \"replaceChildren\", parentnode_replaceChildren],\n    [DocumentFragment.prototype, \"replaceChildren\", parentnode_replaceChildren],\n\n    [Range.prototype, \"surroundContents\", range_surroundContent],\n\n    [Element.prototype, \"insertAdjacentHTML\", insertAdjacentHTML_DD],\n\n    [Element.prototype, \"innerHTML\", innerHTMLsetter],\n    [ShadowRoot.prototype, \"innerHTML\", innerHTMLsetter],\n    [Element.prototype, \"outerHTML\", outerHTMLsetter],\n  ];\n\n  for (const [obj, prop, monkey] of map) {\n    const d = Object.getOwnPropertyDescriptor(obj, prop);\n    const og = d.value || d.set;\n    function monkey2(...args) {\n      return monkey.call(this, og, ...args);\n    }\n    Object.defineProperty(obj, prop,\n      Object.assign({}, d, { [d.set ? \"set\" : \"value\"]: monkey2 }));\n  }\n}", "import { WeakDictionaryOfSets } from \"./1_PortalMap.js\";\nconst TRIGGERS = new WeakDictionaryOfSets();\n//this is the attribute itself for all functions.\n// const PortalDefinition = {\n//   onFirstConnect: function(){...}, //always returns undefined\n//   onMove: function(){...}, //always returns undefined\n//   onReConnect: function(){...}, //always returns undefined\n//   onDisconnect: function(){...}, //always returns undefined\n//   reaction: function(...args){...}, //can return a special thing to end the chain. otherwise whatever.\n// }\n// all functions have this as the attribute node.\n// onFirstConnect, onMove, onReConnect are triggered when the attribute is (re-)added/moved to the DOM.\n// onDisconnect is garbageCollected, so you don't know when that happens.\n// reaction(...args) gets the previous output of the trigger and previous reactions, in reverse sequence\n\nconst Attr = {\n  onFirstConnect() {\n    const varName = this.name.split(\"_\")[1];\n    const action = !varName ?\n      ([mr]) => EventLoopCube.dispatch(mr) :\n      ([mr]) => mr.name.startsWith(varName) && EventLoopCube.dispatch(mr, this);\n    const observer = new MutationObserver(action);\n    observer.observe(this.ownerElement, { attributes: true, attributeOldValue: true });\n  },\n  reaction(...args) {\n    //if the reaction has arguments, then it is a setter\n    //if it has no arguments, then it is a getter\n  }\n}\n/**\n * works out of the box using:\n * \n * documents.Triggers.define(\"content-box\", AttrResize);\n * documents.Triggers.define(\"border-box\", AttrResize);\n * documents.Triggers.define(\"device-pixel-content-box\", AttrResize);\n */\nconst Resize = {\n  onFirstConnect() {\n    const box = [\"content-box\", \"border-box\", \"device-pixel-content-box\"].includes(this.name) ? this.name : \"content-box\";\n    this._observer = new ResizeObserver(([mr]) => eventLoop.dispatch(mr, this));\n    this._observer.observe(this.ownerElement, { box });\n  }\n}\n\n/**\n * AttrIntersection is the main base for IntersectionObserver.\n * With AttrIntersection we can deprecate IntersectionObserver.\n * All other IntersectionObserver triggers should use AttrIntersection.\n */\nconst Intersection = {\n  onFirstConnect() {\n    const options = this.name.split(\"_\").slice(1);\n    const isOff = options.includes(\"off\");\n\n    this._observer = new IntersectionObserver(([mr]) => eventLoop.dispatch(mr, this), { options });\n    this._observer.observe(this.ownerElement);\n  }\n}\nconst I = {\n  onFirstConnect: function () { eventLoopCube.dispatch(null, this); },\n}\nconst prevent = {\n  reaction: (...args) => (args.at(-1).preventDefault(), EventLoopCube.Void),\n}\n\n\nfunction dispatchNav() {\n  const navs = TRIGGERS.get(\"nav\")?.filter(at => at.ownerElement?.isConnected);\n  navs?.length && eventLoopCube.dispatchBatch(location, navs);\n}\nconst Nav = {\n  onFirstConnect: function () { TRIGGERS.put(\"nav\", this); },\n  reaction: function (...args) {\n    const e = args.at(-1);\n    if (!e.eventPhase)\n      return;\n    if (e.type === \"popstate\")\n      return dispatchNav(\"nav\");\n    const defaultActionElement = e.defaultAction?.element;\n    if (!defaultActionElement)\n      return EventLoopCube.Cancel;\n    const href = defaultActionElement.href ?? defaultActionElement.request?.url;\n    if (!href)\n      return EventLoopCube.Cancel;\n    //We have a navigation event, that is meant for :nav:. After this point we commit, and we no longer EventLoopCube.Cancel.\n    const url = new URL(href);\n    if (url.origin !== location.origin)\n      return;\n    const controller = this.ownerElement.getRootNode().querySelector(\"[data-nav]\");\n    if (controller) {\n      const [whitelist, ...blacklist] = controller.getAttribute(\"data-nav\").split(\" \").map(s => s.trim());\n      if (!url.pathname.startsWith(whitelist))\n        return;\n      if (blacklist.some(bl => url.pathname.startsWith(bl)))\n        return;\n    }\n    e.preventDefault();\n    history.pushState({}, \"\", url);\n    dispatchNav();\n  },\n};\n\nconst log = {\n  reaction: function (...args) { console.log(this, ...args); },\n}\nexport {\n  prevent,\n  I,\n  Attr,\n  Intersection,\n  Resize,\n  Nav,\n  log,\n};", "import { patchSegments } from \"./0_UrlLocationSegments.js\";\nimport { FormSubmitRequestFix } from \"./0_FormSubmitRequestFix.js\";\nimport { exposeNativeDefaultAction } from \"./0_NativeDefaultActions.js\";\n// import { EventDefaultAction } from \"./0_EventDefaultAction.js\";\nimport { PortalMap } from \"./1_PortalMap.js\";\nimport { Portals as WindowDocumentEvents } from \"./1c_WindowDocumentEvents.js\";\nimport { Portals as DomEvents } from \"./1b_DomEvents.js\";\nimport { EventLoopCube } from \"./2_EventLoopCube.js\";\nimport { monkeyPatchAppendElements } from \"./3_monkeyPatchAppendElements.js\";\nimport { I, prevent, Nav, log } from \"./4_Portals.js\";\n\npatchSegments(URL.prototype, globalThis.Location?.prototype);\nFormSubmitRequestFix(HTMLFormElement.prototype, HTMLButtonElement.prototype, HTMLInputElement.prototype);\nexposeNativeDefaultAction();\nwindow.EventLoopCube = EventLoopCube;\n\n// const PortalMap2 = NativePortalMap(PortalMap);\ndocument.portals = new PortalMap();\nObject.defineProperty(ShadowRoot.prototype, \"portals\", { value: document.portals });\n// Object.defineProperty(ShadowRoot.prototype, \"portals\", { get: function () { return this.portals ??= new PortalMap2(this); } });\nfor (let [k, v] of Object.entries(WindowDocumentEvents))\n  document.portals.define(k, v);\nfor (let [k, v] of Object.entries(DomEvents))\n  document.portals.define(k, v);\ndocument.portals.define(\"i\", I);\ndocument.portals.define(\"prevent\", prevent);\ndocument.portals.define(\"nav\", Nav);\ndocument.portals.define(\"log\", log);\n\nfunction init() {\n  const cube = EventLoopCube.init(window, document.documentElement);\n  monkeyPatchAppendElements((...args) => cube.connectBranch(...args));\n}\n\ndocument.readyState !== \"loading\" ? init() : document.addEventListener(\"DOMContentLoaded\", init);\n\n// import * as wait from \"../../x/wait/v1.js\";\n//todo this should probably be Wait_ too\n//Wait_100:do-something:at.repeat //which would enable us to have a set timeout\n\n// document.definePortal(\"template\", template);\n// document.definePortal(\"wait\", wait);\n// document.definePortal(\"prevent-default\", { reactions: {i => (eventLoop.event.preventDefault(), i)] });\n// document.definePortal(\"log\", { log: function (...i) { console.log(this, ...i); return i[0]; } });\n// document.definePortal(\"debugger\", { debugger: function (...i) { console.log(this, ...i); debugger; return i[0]; } });\n\n// loadDoubleDots(EventTarget.prototype.addEventListener);\n//adding colors"],
  "mappings": "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",
  "names": ["actions", "Portal", "Portal", "Portals", "EventLoopCube", "TRIGGERS", "TRIGGERS", "EventLoopCube", "Portals"]
}
